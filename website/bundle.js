!function(){"use strict";function l(e){return"[object Function]"===Object.prototype.toString.call(e)}var t,n=0<=navigator.userAgent.toLowerCase().indexOf("firefox");function i(){if(void 0!==t)return t;var e=document.createElement("div");return e.style.position="absolute",e.style.top="-9999px",e.style.width="100px",e.style.height="100px",e.style.overflow="scroll",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t}function o(e){l((e=e||window.event).stopPropagation)?e.stopPropagation():e.cancelBubble=!0,!1===e.cancelBubble&&(e.cancelBubble=!0)}var s,r,a=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")};function h(e,t){return e&&t&&(t=a(t),e.classList?e.classList.contains(t):-1<(" "+e.className+" ").indexOf(" "+t+" "))}function c(e,t){if(e&&t)for(var i=Array.isArray(t)?t:a(t).split(/\s/),s=i.length,r=0;r<s;r++){var l=i[r];l&&!h(e,l)&&(e.classList?e.classList.add(l):e.className+=" "+l)}}function d(e,t){if(e&&t)for(var i=Array.isArray(t)?t:a(t).split(/\s/),s=i.length,r=0;r<s;r++){var l=i[r];l&&h(e,l)&&(e.classList?e.classList.remove(l):(e.className=(" "+e.className+" ").replace(" "+l+" "," "),e.className=a(e.className)))}}function _(e,t,i){return(window.getComputedStyle(e,i||null)||{display:"none"})[t]}function u(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if("none"===_(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var v=0,m=null;function e(e,t){if(e){var i,s;if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=function(){var e=u(this),t=e.rendered,i=e.detached;t!==this.__resize_rendered__&&(!i&&this.__resize_triggers__&&(f(this),this.addEventListener("scroll",b,!0)),this.__resize_rendered__=t,p(this))}.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){var r=e.offsetWidth,l=e.offsetHeight,n=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===r&&e.offsetHeight===l)||p(e)}),o=u(e),a=o.detached,h=o.rendered;e.__resize_observer_triggered__=!1===a&&!1===h,(e.__resize_observer__=n).observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){p(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(v||(i='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',(s=document.createElement("style")).type="text/css",s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i)),(document.querySelector("head")||document.body).appendChild(s),m=s),function(e){var t=_(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};var i=document.createElement("div"),s=document.createElement("div"),r=document.createElement("div"),l=document.createElement("div");i.className="resize-triggers",s.className="resize-expand-trigger",l.className="resize-contract-trigger",s.appendChild(r),i.appendChild(s),i.appendChild(l),e.appendChild(i),e.__resize_triggers__={triggers:i,expand:s,expandChild:r,contract:l},f(e),e.addEventListener("scroll",b,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=u(e).rendered,window.MutationObserver){var c=new MutationObserver(e.__resize_mutation_handler__);c.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=c}e.__resize_listeners__.push(t),v++}}function b(){var e,t,o=this;f(this),this.__resize_raf__&&(e=this.__resize_raf__,(r=r||(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window))(e)),this.__resize_raf__=(t=function(){var e,t,i,s,r,l,n=(t=(e=o).__resize_last__,i=t.width,s=t.height,r=e.offsetWidth,l=e.offsetHeight,r!==i||l!==s?{width:r,height:l}:null);n&&(o.__resize_last__=n,p(o))},(s=s||(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window))(t))}function p(t){t&&t.__resize_listeners__&&t.__resize_listeners__.forEach(function(e){e.call(t,t)})}function f(e){var t=e.__resize_triggers__,i=t.expand,s=t.expandChild,r=t.contract,l=r.scrollWidth,n=r.scrollHeight,o=i.offsetWidth,a=i.offsetHeight,h=i.scrollWidth,c=i.scrollHeight;r.scrollLeft=l,r.scrollTop=n,s.style.width=o+1+"px",s.style.height=a+1+"px",i.scrollLeft=h,i.scrollTop=c}function w(e){var t;(t=e)&&1===t.nodeType&&"string"==typeof t.nodeName&&(e={element:e}),this.element=null,this.horizontal=!1,this.minThumbSize=20,this.forceRenderTrack=!0,this.useRender=!0,this.useResize=!0,this.useShadow=!1,this.beforeCreate=null,this.created=null,this.beforeDestroy=null,this.destroyed=null,this.onResize=null,this.onScroll=null,this.onUpdate=null,function(e){for(var t=arguments,i=1;i<arguments.length;i++)for(var s in arguments[i])t[i].hasOwnProperty(s)&&(t[0][s]=t[i][s])}(this,e),this._events={},this._scrollbarWidth=i(),this._preventRenderTrack=0===this._scrollbarWidth&&!1===this.forceRenderTrack,this._created=!1,this._cursorDown=!1,this._prevPageX=0,this._prevPageY=0,this._scrollTopMax=0,this._scrollLeftMax=0,this._trackTopMax=0,this._trackLeftMax=0,this.$view=this.element,this.$scrollbarY=null,this.$scrollbarX=null,this.$sliderY=null,this.$sliderX=null,this.$shadowY=null,this.$shadowX=null,this.$resizeObserver=null,"useResize"in e?this.useResize=e.useResize:this._preventRenderTrack&&(this.useResize=l(this.onResize))}var $="Scrollbar",g={element:"scrollable-wrapper",view:"view",horizontalScrollbar:"scrollbar is-horizontal",verticalScrollbar:"scrollbar is-vertical",thumb:"thumb",horizontalShadow:"shadow is-horizontal",verticalShadow:"shadow is-vertical",resizeObserver:"resize-observer",horizontal:"is-horizontal",unselect:"is-unselect",prevented:"is-default",visible:"is-visible",invisible:"is-invisible",active:"is-active",force:"is-force-render",hiddenDefault:"is-hidden-default",observed:"is-observed"},z="onwheel"in document.body?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";w.prototype.create=function(){if(this._created)return console.warn("calling on a already-created object"),this;if(l(this.beforeCreate)&&this.beforeCreate(),this.useRender){for(this.$view=document.createElement("div"),this.$resizeObserver=document.createElement("div"),this.$view.className=g.view,this.$resizeObserver.className=g.resizeObserver;0<this.element.childNodes.length;)this.$resizeObserver.appendChild(this.element.childNodes[0]);this.$view.appendChild(this.$resizeObserver),this.element.appendChild(this.$view),!1===this._preventRenderTrack&&(this.$scrollbarX=document.createElement("div"),this.$scrollbarY=document.createElement("div"),this.$sliderX=document.createElement("div"),this.$sliderY=document.createElement("div"),this.$scrollbarX.className=g.horizontalScrollbar,this.$scrollbarY.className=g.verticalScrollbar,this.$sliderX.className=g.thumb,this.$sliderY.className=g.thumb,this.$scrollbarX.appendChild(this.$sliderX),this.$scrollbarY.appendChild(this.$sliderY),this.element.appendChild(this.$scrollbarX),this.element.appendChild(this.$scrollbarY))}else this.$view=this.element.querySelector("."+g.view),this.$resizeObserver=this.$view.querySelector("."+g.resizeObserver),this.$scrollbarX=this.element.querySelector("."+g.horizontalScrollbar.split(/\s/).join(".")),this.$scrollbarY=this.element.querySelector("."+g.verticalScrollbar.split(/\s/).join(".")),this.$scrollbarX&&(this.$sliderX=this.$scrollbarX.querySelector("."+g.thumb)),this.$scrollbarY&&(this.$sliderY=this.$scrollbarY.querySelector("."+g.thumb));return c(this.element,g.element),this.forceRenderTrack&&c(this.element,g.force),this._scrollbarWidth<=0&&c(this.element,g.hiddenDefault),this._preventRenderTrack&&c(this.element,g.prevented),!0===this.horizontal&&(c(this.element,g.horizontal),c(this.$scrollbarY,g.invisible)),this.useShadow&&this._createShadow(),this.useResize&&this._createResizeTrigger(),this._created=!0,l(this.created)&&this.created(),this._bindEvents().update()},w.prototype.update=function(){if(this._preventRenderTrack)return this;if(!1===this._created)return console.warn("calling on a not-yet-created object"),this;0<this._scrollbarWidth?(this.$view.style.width="calc(100% + "+this._scrollbarWidth+"px)",this.$view.style.height="calc(100% + "+this._scrollbarWidth+"px)"):(this.$view.style.width="",this.$view.style.height=""),d(this.$scrollbarY,g.invisible),d(this.$scrollbarX,g.invisible);var e=this.$view.clientWidth/this.$view.scrollWidth*this.$scrollbarX.offsetWidth,t=this.$view.clientHeight/this.$view.scrollHeight*this.$scrollbarY.offsetHeight;this._scrollTopMax=this.$view.scrollHeight-this.$view.clientHeight,this._scrollLeftMax=this.$view.scrollWidth-this.$view.clientWidth;var i=0,s=0;return this._scrollLeftMax<=0?c(this.$scrollbarX,g.invisible):i=Math.max(e,this.minThumbSize),this.$sliderX.style.width=i+"px",this._scrollTopMax<=0?c(this.$scrollbarY,g.invisible):s=Math.max(t,this.minThumbSize),this.$sliderY.style.height=s+"px",this._trackTopMax=this.$scrollbarY.clientHeight-this.$sliderY.offsetHeight,this._trackLeftMax=this.$scrollbarX.clientWidth-this.$sliderX.offsetWidth,l(this.onUpdate)&&this.onUpdate(),this._scrollHandler(),this},w.prototype.destroy=function(){if(!1===this._created)return console.warn("calling on a not-yet-created object"),this;if(d(this.element,[g.horizontal,g.observed,g.prevented,g.hiddenDefault,g.force,g.element]),this._unbindEvents(),this.useResize&&function(e,t){var i=e&&e.__resize_listeners__;if(i){if(t&&i.splice(i.indexOf(t),1),!i.length||!t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",b),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--v&&m&&m.parentNode.removeChild(m)}}(this.$resizeObserver,this._events.resizeHandler),this.useShadow&&(this.element.removeChild(this.$shadowY),this.element.removeChild(this.$shadowX),this.$shadowY=null,this.$shadowX=null),!0===this.useRender){for(this._preventRenderTrack||(this.element.removeChild(this.$scrollbarY),this.element.removeChild(this.$scrollbarX),this.$scrollbarY=null,this.$scrollbarX=null,this.$sliderY=null,this.$sliderX=null);0<this.$resizeObserver.childNodes.length;)this.element.appendChild(this.$resizeObserver.childNodes[0]);this.element.removeChild(this.$view),this.$resizeObserver=null,this.$view=null}else this.$view.style.width="",this.$view.style.height="",!1===this._preventRenderTrack?(d(this.$scrollbarY,g.invisible),d(this.$scrollbarX,g.invisible)):(c(this.$scrollbarY,g.invisible),c(this.$scrollbarX,g.invisible));return this._created=!1,null},w.prototype.getViewElement=function(){return this.$view},w.prototype._createResizeTrigger=function(){c(this.element,g.observed),this._events.resizeHandler=this._resizeHandler.bind(this),e(this.$resizeObserver,this._events.resizeHandler)},w.prototype._createShadow=function(){this.$shadowX=document.createElement("div"),this.$shadowY=document.createElement("div"),this.element.appendChild(this.$shadowX),this.element.appendChild(this.$shadowY),this.$shadowX.className=g.horizontalShadow+" "+g.invisible,this.$shadowY.className=g.verticalShadow+" "+g.invisible},w.prototype._resizeHandler=function(){var e=window.devicePixelRatio||1;e&&(this._scrollbarWidth=i()/e),this.update(),l(this.onResize)&&this.onResize()},w.prototype._bindEvents=function(){return this._events.scrollHandler=this._scrollHandler.bind(this),this._events.clickHorizontalTrackHandler=this._clickTrackHandler(!1).bind(this),this._events.clickVerticalTrackHandler=this._clickTrackHandler(!0).bind(this),this._events.clickHorizontalThumbHandler=this._clickThumbHandler(!1).bind(this),this._events.clickVerticalThumbHandler=this._clickThumbHandler(!0).bind(this),this._events.mouseScrollTrackHandler=this._mouseScrollTrackHandler.bind(this),this._events.mouseUpDocumentHandler=this._mouseUpDocumentHandler.bind(this),this._events.mouseMoveDocumentHandler=this._mouseMoveDocumentHandler.bind(this),this.horizontal?this.$view.addEventListener(z,this._events.mouseScrollTrackHandler):this.$view.addEventListener("scroll",this._events.scrollHandler),!1===this._preventRenderTrack&&(this.$scrollbarX.addEventListener("mousedown",this._events.clickHorizontalTrackHandler),this.$scrollbarY.addEventListener("mousedown",this._events.clickVerticalTrackHandler),this.$sliderX.addEventListener("mousedown",this._events.clickHorizontalThumbHandler),this.$sliderY.addEventListener("mousedown",this._events.clickVerticalThumbHandler),this.$scrollbarX.addEventListener(z,this._events.mouseScrollTrackHandler),this.$scrollbarY.addEventListener(z,this._events.mouseScrollTrackHandler),document.addEventListener("mouseup",this._events.mouseUpDocumentHandler)),this},w.prototype._unbindEvents=function(){return this.$view.removeEventListener("scroll",this._events.scrollHandler),this.$view.removeEventListener(z,this._events.mouseScrollTrackHandler),!1===this._preventRenderTrack&&(this.$scrollbarY.removeEventListener("mousedown",this._events.clickVerticalTrackHandler),this.$scrollbarX.removeEventListener("mousedown",this._events.clickHorizontalTrackHandler),this.$sliderY.removeEventListener("mousedown",this._events.clickVerticalThumbHandler),this.$sliderX.removeEventListener("mousedown",this._events.clickHorizontalThumbHandler),this.$scrollbarY.removeEventListener(z,this._events.mouseScrollTrackHandler),this.$scrollbarX.removeEventListener(z,this._events.mouseScrollTrackHandler),document.removeEventListener("mouseup",this._events.mouseUpDocumentHandler),document.removeEventListener("mousemove",this._events.mouseMoveDocumentHandler)),this},w.prototype._scrollHandler=function(){var e=this.$view.scrollLeft*this._trackLeftMax/this._scrollLeftMax||0,t=this.$view.scrollTop*this._trackTopMax/this._scrollTopMax||0;this.useShadow&&this._setShadowStyle(),!1===this._preventRenderTrack&&(this.$sliderX.style.msTransform="translateX("+e+"px)",this.$sliderX.style.webkitTransform="translate3d("+e+"px, 0, 0)",this.$sliderX.style.transform="translate3d("+e+"px, 0, 0)",this.$sliderY.style.msTransform="translateY("+t+"px)",this.$sliderY.style.webkitTransform="translate3d(0, "+t+"px, 0)",this.$sliderY.style.transform="translate3d(0, "+t+"px, 0)"),l(this.onScroll)&&this.onScroll(e,t)},w.prototype._setShadowStyle=function(){0===this.$view.scrollTop?(d(this.$shadowY,g.visible),c(this.$shadowY,g.invisible)):(c(this.$shadowY,g.visible),d(this.$shadowY,g.invisible)),this.$view.scrollLeft===this.$view.scrollWidth-this.$view.clientWidth?(d(this.$shadowX,g.visible),c(this.$shadowX,g.invisible)):(c(this.$shadowX,g.visible),d(this.$shadowX,g.invisible))},w.prototype._mouseScrollTrackHandler=function(e){var t,i,s=0,r=0;o(e),l(e.preventDefault)?e.preventDefault():e.returnValue=!1,r=e.deltaY||e.wheelDeltaY||-e.wheelDelta||0,s=e.deltaX||e.wheelDeltaX||0,n&&(r*=40,s*=40),e.shiftKey&&(s=(t=[r,s])[0],r=t[1]),this.horizontal&&(s=(i=[r,s])[0],r=i[1]),e.altKey&&(s*=s,r*=r),this.$view.scrollTop+=r,this.$view.scrollLeft+=s,this.horizontal&&this._scrollHandler()},w.prototype._clickTrackHandler=function(i){var s=this;return function(e){var t;i?(t=100*(Math.abs(e.target.getBoundingClientRect().top-e.clientY)-s.$sliderY.offsetHeight/2)/s.$scrollbarY.offsetHeight,s.$view.scrollTop=t*s.$view.scrollHeight/100):(t=100*(Math.abs(e.target.getBoundingClientRect().left-e.clientX)-s.$sliderX.offsetWidth/2)/s.$scrollbarX.offsetWidth,s.$view.scrollLeft=t*s.$view.scrollWidth/100),!0===s.horizontal&&s._scrollHandler()}},w.prototype._clickThumbHandler=function(t){var i=this;return function(e){o(e),e.ctrlKey||2===e.button||(c(e.currentTarget,g.active),i._startDrag(e),t?i._prevPageY=e.currentTarget.offsetHeight-(e.clientY-e.currentTarget.getBoundingClientRect().top):i._prevPageX=e.currentTarget.offsetWidth-(e.clientX-e.currentTarget.getBoundingClientRect().left))}},w.prototype._startDrag=function(e){e.stopImmediatePropagation(),this._cursorDown=!0,c(document.body,g.unselect),document.addEventListener("mousemove",this._events.mouseMoveDocumentHandler),document.onselectstart=function(){return!1}},w.prototype._mouseUpDocumentHandler=function(){this._cursorDown=!1,this._prevPageX=this._prevPageY=0,d(document.body,g.unselect),d(this.$sliderY,g.active),d(this.$sliderX,g.active),document.removeEventListener("mousemove",this._events.mouseMoveDocumentHandler),document.onselectstart=null},w.prototype._mouseMoveDocumentHandler=function(e){var t,i;if(!1!==this._cursorDown)return this._prevPageY?(t=e.clientY-this.$scrollbarY.getBoundingClientRect().top,i=this.$sliderY.offsetHeight-this._prevPageY,this.$view.scrollTop=this._scrollTopMax*(t-i)/this._trackTopMax,void(!0===this.horizontal&&this._scrollHandler())):void(this._prevPageX&&(t=e.clientX-this.$scrollbarX.getBoundingClientRect().left,i=this.$sliderX.offsetWidth-this._prevPageX,this.$view.scrollLeft=this._scrollLeftMax*(t-i)/this._trackLeftMax,!0===this.horizontal&&this._scrollHandler()))},window[$]||(window[$]=w),new w({element:document.body,useRender:!1}).create(),new w(document.querySelector(".ex0 .content")).create(),new w(document.querySelector(".ex1 .list-container")).create(),new w({element:document.querySelector(".ex2 .code"),horizontal:!0}).create(),new w({element:document.querySelector(".ex3 .box")}).create(),new w({element:document.querySelector(".ex4 .manilla")}).create(),new w(document.querySelector(".ex5 .sample")).create(),new w({element:document.querySelector(".ex6 .sample"),forceRenderTrack:!1}).create()}();
